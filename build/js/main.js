"use strict";

//fade-in when visible
document.addEventListener("DOMContentLoaded", function () {
  var elements = document.querySelectorAll(".fade-in, .slideInLeft, .slideInRight, .fadeInFromTop");
  function checkVisibility() {
    elements.forEach(function (el) {
      var rect = el.getBoundingClientRect();
      if (rect.top < window.innerHeight * 0.9) {
        el.classList.add("visible");
      }
    });
  }
  window.addEventListener("scroll", checkVisibility);
  checkVisibility();
});

//open form block
document.addEventListener("DOMContentLoaded", function () {
  var btn = document.querySelector(".header__content-btn");
  var form = document.querySelector(".firstForm");
  btn.addEventListener("click", function () {
    if (form.style.display === "none" || form.style.display === "") {
      form.style.display = "block";
      btn.textContent = "Згорнути";
    } else {
      form.style.display = "none";
      btn.textContent = "Доєднатись";
    }
  });
});

//slider
document.addEventListener("DOMContentLoaded", function () {
  var sliderWrapper = document.querySelector(".slider__wrapper");
  var slides = document.querySelectorAll(".slider__slide");
  var prevBtn = document.querySelector(".slider__btn-prev");
  var nextBtn = document.querySelector(".slider__btn-next");
  var dotsContainer = document.querySelector(".slider__dots");
  var currentIndex = 0;
  var interval;
  var touchStartX = 0;
  var touchEndX = 0;
  function updateSlider() {
    slides.forEach(function (slide, index) {
      slide.classList.remove("active", "opacity");
      slide.classList.add("".concat(index === currentIndex ? "active" : "opacity"));
    });
    document.querySelectorAll(".slider__dot").forEach(function (dot, index) {
      dot.classList.toggle("active", index === currentIndex);
    });
    stopAutoSlide();
    startAutoSlide();
  }
  function nextSlide() {
    currentIndex = (currentIndex + 1) % slides.length;
    updateSlider();
  }
  function prevSlide() {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
    updateSlider();
  }
  function startAutoSlide() {
    interval = setInterval(nextSlide, 3000);
  }
  function stopAutoSlide() {
    clearInterval(interval);
  }
  function handleTouchStart(event) {
    touchStartX = event.touches[0].clientX;
  }
  function handleTouchEnd(event) {
    touchEndX = event.changedTouches[0].clientX;
    handleSwipe();
  }
  function handleSwipe() {
    var swipeThreshold = 50;
    if (touchStartX - touchEndX > swipeThreshold) {
      nextSlide();
    } else if (touchEndX - touchStartX > swipeThreshold) {
      prevSlide();
    }
  }
  slides.forEach(function (_, index) {
    var dot = document.createElement("span");
    dot.classList.add("slider__dot");
    dot.addEventListener("click", function () {
      currentIndex = index;
      updateSlider();
    });
    dotsContainer.appendChild(dot);
  });
  prevBtn.addEventListener("click", prevSlide);
  nextBtn.addEventListener("click", nextSlide);

  // mob swipe
  sliderWrapper.addEventListener("touchstart", handleTouchStart);
  sliderWrapper.addEventListener("touchend", handleTouchEnd);
  updateSlider();
});

//form
document.addEventListener("DOMContentLoaded", function () {
  var forms = document.querySelectorAll('form'); // Все формы на странице

  forms.forEach(function (form) {
    var phoneInput = form.querySelector('.form__input-phone');
    var dateInput = form.querySelector('.form__input-date');
    var regionInput = form.querySelector('.form__input-region');
    var checkboxInput = form.querySelector('.form__input-checkbox');
    var radioInputs = form.querySelectorAll('input[name="yes-no"]'); // Для проверки военнослужащего
    var submitButton = form.querySelector('.form__submit');
    var allInputs = form.querySelectorAll('.form__input');
    var telegramInput = form.querySelector('.form__input-telegram'); // Нік в телеграмі
    var formWarning = form.querySelector('.form__warning'); // Контейнер для предупреждений

    // telephone
    phoneInput.addEventListener('focus', function () {
      if (phoneInput.value.trim() === '') {
        phoneInput.value = '+38'; // Автозаполнение при фокусе
        phoneInput.setSelectionRange(3, 3); // Ставим курсор после +38
      }
    });
    phoneInput.addEventListener('input', function (e) {
      var start = this.selectionStart;
      var rawValue = this.value.replace(/\D/g, ''); // Убираем все нецифровые символы

      if (e.inputType === "deleteContentBackward" && this.value.endsWith(" ")) {
        this.value = this.value.slice(0, -1);
        start--; // Корректируем позицию каретки при удалении пробела
      }
      var formattedValue = '+38';
      if (rawValue.length > 2) formattedValue += ' ' + rawValue.slice(2, 5);
      if (rawValue.length > 5) formattedValue += ' ' + rawValue.slice(5, 8);
      if (rawValue.length > 8) formattedValue += ' ' + rawValue.slice(8, 10);
      if (rawValue.length > 10) formattedValue += ' ' + rawValue.slice(10, 12);

      // Определяем разницу в длине
      var diff = formattedValue.length - this.value.length;
      this.value = formattedValue;

      // Корректируем позицию каретки
      this.setSelectionRange(start + diff, start + diff);
    });

    //calendar
    dateInput.addEventListener('input', function () {
      var parts = this.value.split('-');
      if (parts[0] && parts[0].length > 4) {
        parts[0] = parts[0].slice(0, 4);
        this.value = parts.join('-');
      }
    });

    //input
    form.addEventListener('input', function (event) {
      var targetInput = event.target;
      if (targetInput.classList.contains('warning')) {
        validateSingleInput(targetInput);
      }
      var isAnyInputFilled = Array.from(allInputs).some(function (input) {
        return input.value.trim() !== "" || input.checked;
      });
      if (isAnyInputFilled) {
        submitButton.classList.add('active');
      } else {
        submitButton.classList.remove('active');
      }
    });

    // check 1 input
    function validateSingleInput(input) {
      if (input.type === "date" && input.value === "2000-01-01") {
        input.classList.add('warning');
      } else if (input.value.trim() === "" || input.classList.contains('form__input-phone') && !/^\+38\s*\d{3}\s*\d{3}\s*\d{2}\s*\d{2}$/.test(input.value)) {
        input.classList.add('warning');
      } else if (input.classList.contains('form__input-region') && input.value === "") {
        input.classList.add('warning');
      } else if (input.classList.contains('form__input-checkbox') && !input.checked) {
        input.classList.add('warning');
      } else if (input.classList.contains('form__input-radio')) {
        var isRadioChecked = Array.from(radioInputs).some(function (radio) {
          return radio.checked;
        });
        if (!isRadioChecked) {
          radioInputs.forEach(function (radio) {
            return radio.classList.add('warning');
          });
        } else {
          radioInputs.forEach(function (radio) {
            return radio.classList.remove('warning');
          });
        }
      } else {
        input.classList.remove('warning');
      }
    }

    // validation

    function checkValid() {
      var isValid = false;
      var warnings = form.querySelectorAll(".warning");
      warnings.forEach(function (warning) {
        return warning.classList.remove("warning");
      }); // Очистити попередні помилки

      var addWarning = function addWarning(input, message) {
        isValid = false;
        input.classList.add("warning");
        var warningMessage = input.nextElementSibling;
        if (!warningMessage || !warningMessage.classList.contains("form__warning")) {
          warningMessage = document.createElement("p");
          warningMessage.classList.add("form__warning");
          warningMessage.textContent = message;
          input.parentNode.appendChild(warningMessage);
        }
      };
      var surnameValid = false;
      var firstNameValid = false;
      var secondNameValid = false;
      var phoneValid = false;
      var birthDateValid = false;
      var isMilitaryValid = false;
      var consentValid = false;
      var surname = form.querySelector(".form__input-surname");
      surname.addEventListener("input", function () {
        if (!surname.value.trim()) addWarning(surname, "Прізвище обов'язкове");
      });
      if (!surname.value.trim()) {
        addWarning(surname, "Прізвище обов'язкове");
      } else {
        surnameValid = true;
      }
      var firstName = form.querySelector(".form__input-first-name");
      if (!firstName.value.trim()) {
        addWarning(firstName, "Ім'я обов'язкове");
      } else {
        firstNameValid = true;
      }
      var secondName = form.querySelector(".form__input-middle-name");
      if (!secondName.value.trim()) {
        addWarning(secondName, "По батькові обов'язкове");
      } else {
        secondNameValid = true;
      }
      var phone = form.querySelector(".form__input-phone");
      if (!phone.value.trim() || !/^\+38\s?\d{3}\s?\d{3}\s?\d{2}\s?\d{2}$/.test(phone.value)) {
        addWarning(phone, "Номер телефону обов'язковий");
      } else {
        phoneValid = true;
      }
      var birthDate = form.querySelector(".form__input-date");
      if (!birthDate.value || birthDate.value === "2000-01-01") {
        addWarning(birthDate, "Дата народження обов'язкова");
      } else {
        birthDateValid = true;
      }
      var isMilitary = form.querySelector(".form__input-radio:checked");
      if (!isMilitary) {
        addWarning(form.querySelector(".form__radio-group"), "Оберіть варіант");
      } else {
        isMilitaryValid = true;
      }
      var consent = form.querySelector(".form__input-checkbox");
      if (!consent.checked) {
        addWarning(consent, "Ви повинні погодитися з обробкою даних");
      } else {
        consentValid = true;
      }
      if (surnameValid && firstNameValid && secondNameValid && phoneValid && birthDateValid && isMilitaryValid && consentValid) {
        isValid = true;
      }
      if (!isValid) {
        formWarning.classList.add('visible');
        submitButton.classList.add('warning');
      } else {
        formWarning.classList.remove('visible');
        submitButton.classList.remove('warning');
      }
      return isValid;
    }
    forms.forEach(function (form) {
      form.addEventListener("submit", function (event) {
        event.preventDefault(); // Заблокувати стандартну відправку

        var isValid = checkValid();
        console.log(isValid);

        // Перевірка каптчі
        var recaptchaResponse = grecaptcha.getResponse(); // Отримуємо відповідь з каптчі
        if (recaptchaResponse.length === 0) {
          alert("Будь ласка, пройдіть перевірку reCAPTCHA.");
          document.querySelector('.content').classList.add('hidden'); // Сховати контент
          document.querySelector('.recaptcha').style.display = 'block'; // Показати каптчу
          return; // Якщо каптча не пройдена, не відправляємо форму
        }
        if (isValid) {
          var formData = new FormData(form);
          var successMessage = form.querySelector('.form__success');
          if (successMessage) {
            successMessage.classList.add('visible');
            setTimeout(function () {
              successMessage.classList.remove('visible');
              formWarning.classList.add('visible');
              form.reset();
            }, 5000);
            successMessage.addEventListener('click', function () {
              successMessage.classList.remove('visible');
              formWarning.classList.add('visible');
              form.reset();
            });
          }
          fetch(form.action, {
            method: "POST",
            body: formData
          }).then(function (response) {
            return response.text();
          }).then(function (data) {
            console.log(data); // Вивести відповідь від сервера

            var successMessage = form.querySelector('.form__success');
            var errorMessage = form.querySelector('.form__warning');
            if (data.includes("Дякуємо за вашу заявку!")) {
              // Показати повідомлення про успіх
              if (successMessage) {
                successMessage.classList.add('visible');
                setTimeout(function () {
                  successMessage.classList.remove('visible');
                  form.reset(); // Очистити форму
                }, 5000);
              }
            } else {
              // Показати повідомлення про помилку
            }
          })["catch"](function (error) {
            console.error("Помилка при відправці форми:", error);
            var errorMessage = form.querySelector('.form__warning');
            if (errorMessage) {
              errorMessage.textContent = "Помилка при відправці форми. Спробуйте ще раз.";
              errorMessage.classList.add('visible');
            }
          });
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hlY2tWaXNpYmlsaXR5IiwiZm9yRWFjaCIsImVsIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYnRuIiwicXVlcnlTZWxlY3RvciIsImZvcm0iLCJzdHlsZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsInNsaWRlcldyYXBwZXIiLCJzbGlkZXMiLCJwcmV2QnRuIiwibmV4dEJ0biIsImRvdHNDb250YWluZXIiLCJjdXJyZW50SW5kZXgiLCJpbnRlcnZhbCIsInRvdWNoU3RhcnRYIiwidG91Y2hFbmRYIiwidXBkYXRlU2xpZGVyIiwic2xpZGUiLCJpbmRleCIsInJlbW92ZSIsImNvbmNhdCIsImRvdCIsInRvZ2dsZSIsInN0b3BBdXRvU2xpZGUiLCJzdGFydEF1dG9TbGlkZSIsIm5leHRTbGlkZSIsImxlbmd0aCIsInByZXZTbGlkZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImhhbmRsZVRvdWNoU3RhcnQiLCJldmVudCIsInRvdWNoZXMiLCJjbGllbnRYIiwiaGFuZGxlVG91Y2hFbmQiLCJjaGFuZ2VkVG91Y2hlcyIsImhhbmRsZVN3aXBlIiwic3dpcGVUaHJlc2hvbGQiLCJfIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZm9ybXMiLCJwaG9uZUlucHV0IiwiZGF0ZUlucHV0IiwicmVnaW9uSW5wdXQiLCJjaGVja2JveElucHV0IiwicmFkaW9JbnB1dHMiLCJzdWJtaXRCdXR0b24iLCJhbGxJbnB1dHMiLCJ0ZWxlZ3JhbUlucHV0IiwiZm9ybVdhcm5pbmciLCJ2YWx1ZSIsInRyaW0iLCJzZXRTZWxlY3Rpb25SYW5nZSIsImUiLCJzdGFydCIsInNlbGVjdGlvblN0YXJ0IiwicmF3VmFsdWUiLCJyZXBsYWNlIiwiaW5wdXRUeXBlIiwiZW5kc1dpdGgiLCJzbGljZSIsImZvcm1hdHRlZFZhbHVlIiwiZGlmZiIsInBhcnRzIiwic3BsaXQiLCJqb2luIiwidGFyZ2V0SW5wdXQiLCJ0YXJnZXQiLCJjb250YWlucyIsInZhbGlkYXRlU2luZ2xlSW5wdXQiLCJpc0FueUlucHV0RmlsbGVkIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsImlucHV0IiwiY2hlY2tlZCIsInR5cGUiLCJ0ZXN0IiwiaXNSYWRpb0NoZWNrZWQiLCJyYWRpbyIsImNoZWNrVmFsaWQiLCJpc1ZhbGlkIiwid2FybmluZ3MiLCJ3YXJuaW5nIiwiYWRkV2FybmluZyIsIm1lc3NhZ2UiLCJ3YXJuaW5nTWVzc2FnZSIsIm5leHRFbGVtZW50U2libGluZyIsInBhcmVudE5vZGUiLCJzdXJuYW1lVmFsaWQiLCJmaXJzdE5hbWVWYWxpZCIsInNlY29uZE5hbWVWYWxpZCIsInBob25lVmFsaWQiLCJiaXJ0aERhdGVWYWxpZCIsImlzTWlsaXRhcnlWYWxpZCIsImNvbnNlbnRWYWxpZCIsInN1cm5hbWUiLCJmaXJzdE5hbWUiLCJzZWNvbmROYW1lIiwicGhvbmUiLCJiaXJ0aERhdGUiLCJpc01pbGl0YXJ5IiwiY29uc2VudCIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyIsInJlY2FwdGNoYVJlc3BvbnNlIiwiZ3JlY2FwdGNoYSIsImdldFJlc3BvbnNlIiwiYWxlcnQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwic3VjY2Vzc01lc3NhZ2UiLCJzZXRUaW1lb3V0IiwicmVzZXQiLCJmZXRjaCIsImFjdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJ0ZXh0IiwiZGF0YSIsImVycm9yTWVzc2FnZSIsImluY2x1ZGVzIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQUEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFZO0VBQ3RELElBQU1DLFFBQVEsR0FBR0YsUUFBUSxDQUFD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O1lBRW5CLElBQU1WLGNBQWMsR0FBRzlHLElBQUksQ0FBQ0QsYUFBYSxDQUFDLGdCQUFnQixDQUFDO1lBQzNELElBQU0wSCxZQUFZLEdBQUd6SCxJQUFJLENBQUNELGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQztZQUV6RCxJQUFJeUgsSUFBSSxDQUFDRSxRQUFRLENBQUMseUJBQXlCLENBQUMsRUFBRTtjQUMxQztjQUNBLElBQUlaLGNBQWMsRUFBRTtnQkFDaEJBLGNBQWMsQ0FBQ2xILFNBQVMsQ0FBQ0MsR0FBRyxDQUFDLFNBQVMsQ0FBQztnQkFDdkNrSCxVQUFVLENBQUMsWUFBTTtrQkFDYkQsY0FBYyxDQUFDbEgsU0FBUyxDQUFDb0IsTUFBTSxDQUFDLFNBQVMsQ0FBQztrQkFDMUNoQixJQUFJLENBQUNnSCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsRUFBRSxJQUFJLENBQUM7Y0FDWjtZQUNKLENBQUMsTUFBTTtjQUNIO1lBQUE7VUFFUixDQUFDLENBQUMsU0FDSSxDQUFDLFVBQUFXLEtBQUssRUFBSTtZQUNackIsT0FBTyxDQUFDcUIsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUM7WUFDcEQsSUFBTUYsWUFBWSxHQUFHekgsSUFBSSxDQUFDRCxhQUFhLENBQUMsZ0JBQWdCLENBQUM7WUFDekQsSUFBSTBILFlBQVksRUFBRTtjQUNkQSxZQUFZLENBQUN0SCxXQUFXLEdBQUcsZ0RBQWdEO2NBQzNFc0gsWUFBWSxDQUFDN0gsU0FBUyxDQUFDQyxHQUFHLENBQUMsU0FBUyxDQUFDO1lBQ3pDO1VBQ0osQ0FBQyxDQUFDO1FBQ1Y7TUFDSixDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFHTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vZmFkZS1pbiB3aGVuIHZpc2libGVcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmFkZS1pbiwgLnNsaWRlSW5MZWZ0LCAuc2xpZGVJblJpZ2h0LCAuZmFkZUluRnJvbVRvcFwiKTtcblxuICAgIGZ1bmN0aW9uIGNoZWNrVmlzaWJpbGl0eSgpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAocmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjkpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgY2hlY2tWaXNpYmlsaXR5KTtcbiAgICBjaGVja1Zpc2liaWxpdHkoKTtcbn0pO1xuXG4vL29wZW4gZm9ybSBibG9ja1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19jb250ZW50LWJ0blwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maXJzdEZvcm1cIik7XG5cbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGZvcm0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZm9ybS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiKSB7XG4gICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBcItCX0LPQvtGA0L3Rg9GC0LhcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gXCLQlNC+0ZTQtNC90LDRgtC40YHRjFwiO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuLy9zbGlkZXJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzbGlkZXJXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX3dyYXBwZXJcIik7XG4gICAgY29uc3Qgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZXJfX3NsaWRlXCIpO1xuICAgIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fYnRuLXByZXZcIik7XG4gICAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19idG4tbmV4dFwiKTtcbiAgICBjb25zdCBkb3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2RvdHNcIik7XG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG4gICAgbGV0IGludGVydmFsO1xuICAgIGxldCB0b3VjaFN0YXJ0WCA9IDA7XG4gICAgbGV0IHRvdWNoRW5kWCA9IDA7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTbGlkZXIoKSB7XG4gICAgICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIiwgXCJvcGFjaXR5XCIpXG4gICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKGAke2luZGV4ID09PSBjdXJyZW50SW5kZXggPyBcImFjdGl2ZVwiIDogXCJvcGFjaXR5XCJ9YClcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyX19kb3RcIikuZm9yRWFjaCgoZG90LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgZG90LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIiwgaW5kZXggPT09IGN1cnJlbnRJbmRleCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0b3BBdXRvU2xpZGUoKTtcbiAgICAgICAgc3RhcnRBdXRvU2xpZGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXh0U2xpZGUoKSB7XG4gICAgICAgIGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIHNsaWRlcy5sZW5ndGg7XG4gICAgICAgIHVwZGF0ZVNsaWRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXZTbGlkZSgpIHtcbiAgICAgICAgY3VycmVudEluZGV4ID0gKGN1cnJlbnRJbmRleCAtIDEgKyBzbGlkZXMubGVuZ3RoKSAlIHNsaWRlcy5sZW5ndGg7XG4gICAgICAgIHVwZGF0ZVNsaWRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0QXV0b1NsaWRlKCkge1xuICAgICAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKG5leHRTbGlkZSwgMzAwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcEF1dG9TbGlkZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydChldmVudCkge1xuICAgICAgICB0b3VjaFN0YXJ0WCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVUb3VjaEVuZChldmVudCkge1xuICAgICAgICB0b3VjaEVuZFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICBoYW5kbGVTd2lwZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVN3aXBlKCkge1xuICAgICAgICBjb25zdCBzd2lwZVRocmVzaG9sZCA9IDUwO1xuICAgICAgICBpZiAodG91Y2hTdGFydFggLSB0b3VjaEVuZFggPiBzd2lwZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgbmV4dFNsaWRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodG91Y2hFbmRYIC0gdG91Y2hTdGFydFggPiBzd2lwZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgcHJldlNsaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzbGlkZXMuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKFwic2xpZGVyX19kb3RcIik7XG4gICAgICAgIGRvdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB1cGRhdGVTbGlkZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvdHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICB9KTtcblxuICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByZXZTbGlkZSk7XG4gICAgbmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbmV4dFNsaWRlKTtcblxuICAgIC8vIG1vYiBzd2lwZVxuICAgIHNsaWRlcldyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlVG91Y2hTdGFydCk7XG4gICAgc2xpZGVyV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgaGFuZGxlVG91Y2hFbmQpO1xuXG4gICAgdXBkYXRlU2xpZGVyKCk7XG59KTtcblxuXG4vL2Zvcm1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBjb25zdCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKTsgIC8vINCS0YHQtSDRhNC+0YDQvNGLINC90LAg0YHRgtGA0LDQvdC40YbQtVxuXG4gICAgZm9ybXMuZm9yRWFjaChmb3JtID0+IHtcbiAgICAgICAgY29uc3QgcGhvbmVJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LXBob25lJyk7XG4gICAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LWRhdGUnKTtcbiAgICAgICAgY29uc3QgcmVnaW9uSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dC1yZWdpb24nKTtcbiAgICAgICAgY29uc3QgY2hlY2tib3hJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LWNoZWNrYm94Jyk7XG4gICAgICAgIGNvbnN0IHJhZGlvSW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwieWVzLW5vXCJdJyk7IC8vINCU0LvRjyDQv9GA0L7QstC10YDQutC4INCy0L7QtdC90L3QvtGB0LvRg9C20LDRidC10LPQvlxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQnKTtcbiAgICAgICAgY29uc3QgYWxsSW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcbiAgICAgICAgY29uc3QgdGVsZWdyYW1JbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LXRlbGVncmFtJyk7IC8vINCd0ZbQuiDQsiDRgtC10LvQtdCz0YDQsNC80ZZcbiAgICAgICAgY29uc3QgZm9ybVdhcm5pbmcgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX193YXJuaW5nJyk7ICAvLyDQmtC+0L3RgtC10LnQvdC10YAg0LTQu9GPINC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40LlcblxuICAgICAgICAvLyB0ZWxlcGhvbmVcbiAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChwaG9uZUlucHV0LnZhbHVlLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBwaG9uZUlucHV0LnZhbHVlID0gJyszOCc7IC8vINCQ0LLRgtC+0LfQsNC/0L7Qu9C90LXQvdC40LUg0L/RgNC4INGE0L7QutGD0YHQtVxuICAgICAgICAgICAgICAgIHBob25lSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMywgMyk7IC8vINCh0YLQsNCy0LjQvCDQutGD0YDRgdC+0YAg0L/QvtGB0LvQtSArMzhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgbGV0IHJhd1ZhbHVlID0gdGhpcy52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpOyAvLyDQo9Cx0LjRgNCw0LXQvCDQstGB0LUg0L3QtdGG0LjRhNGA0L7QstGL0LUg0YHQuNC80LLQvtC70YtcblxuICAgICAgICAgICAgaWYgKGUuaW5wdXRUeXBlID09PSBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiICYmIHRoaXMudmFsdWUuZW5kc1dpdGgoXCIgXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgIHN0YXJ0LS07IC8vINCa0L7RgNGA0LXQutGC0LjRgNGD0LXQvCDQv9C+0LfQuNGG0LjRjiDQutCw0YDQtdGC0LrQuCDQv9GA0Lgg0YPQtNCw0LvQtdC90LjQuCDQv9GA0L7QsdC10LvQsFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZm9ybWF0dGVkVmFsdWUgPSAnKzM4JztcblxuICAgICAgICAgICAgaWYgKHJhd1ZhbHVlLmxlbmd0aCA+IDIpIGZvcm1hdHRlZFZhbHVlICs9ICcgJyArIHJhd1ZhbHVlLnNsaWNlKDIsIDUpO1xuICAgICAgICAgICAgaWYgKHJhd1ZhbHVlLmxlbmd0aCA+IDUpIGZvcm1hdHRlZFZhbHVlICs9ICcgJyArIHJhd1ZhbHVlLnNsaWNlKDUsIDgpO1xuICAgICAgICAgICAgaWYgKHJhd1ZhbHVlLmxlbmd0aCA+IDgpIGZvcm1hdHRlZFZhbHVlICs9ICcgJyArIHJhd1ZhbHVlLnNsaWNlKDgsIDEwKTtcbiAgICAgICAgICAgIGlmIChyYXdWYWx1ZS5sZW5ndGggPiAxMCkgZm9ybWF0dGVkVmFsdWUgKz0gJyAnICsgcmF3VmFsdWUuc2xpY2UoMTAsIDEyKTtcblxuICAgICAgICAgICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YDQsNC30L3QuNGG0YMg0LIg0LTQu9C40L3QtVxuICAgICAgICAgICAgbGV0IGRpZmYgPSBmb3JtYXR0ZWRWYWx1ZS5sZW5ndGggLSB0aGlzLnZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuXG4gICAgICAgICAgICAvLyDQmtC+0YDRgNC10LrRgtC40YDRg9C10Lwg0L/QvtC30LjRhtC40Y4g0LrQsNGA0LXRgtC60LhcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQgKyBkaWZmLCBzdGFydCArIGRpZmYpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vY2FsZW5kYXJcbiAgICAgICAgZGF0ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLnZhbHVlLnNwbGl0KCctJyk7XG4gICAgICAgICAgICBpZiAocGFydHNbMF0gJiYgcGFydHNbMF0ubGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgICAgIHBhcnRzWzBdID0gcGFydHNbMF0uc2xpY2UoMCwgNCk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnRzLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9pbnB1dFxuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRJbnB1dCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgaWYgKHRhcmdldElucHV0LmNsYXNzTGlzdC5jb250YWlucygnd2FybmluZycpKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVTaW5nbGVJbnB1dCh0YXJnZXRJbnB1dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQW55SW5wdXRGaWxsZWQgPSBBcnJheS5mcm9tKGFsbElucHV0cykuc29tZShpbnB1dCA9PiBpbnB1dC52YWx1ZS50cmltKCkgIT09IFwiXCIgfHwgaW5wdXQuY2hlY2tlZCk7XG4gICAgICAgICAgICBpZiAoaXNBbnlJbnB1dEZpbGxlZCkge1xuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjaGVjayAxIGlucHV0XG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlU2luZ2xlSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcImRhdGVcIiAmJiBpbnB1dC52YWx1ZSA9PT0gXCIyMDAwLTAxLTAxXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlLnRyaW0oKSA9PT0gXCJcIiB8fCAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtX19pbnB1dC1waG9uZScpICYmICEvXlxcKzM4XFxzKlxcZHszfVxccypcXGR7M31cXHMqXFxkezJ9XFxzKlxcZHsyfSQvLnRlc3QoaW5wdXQudmFsdWUpKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtX19pbnB1dC1yZWdpb24nKSAmJiBpbnB1dC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtX19pbnB1dC1jaGVja2JveCcpICYmICFpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm1fX2lucHV0LXJhZGlvJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1JhZGlvQ2hlY2tlZCA9IEFycmF5LmZyb20ocmFkaW9JbnB1dHMpLnNvbWUocmFkaW8gPT4gcmFkaW8uY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1JhZGlvQ2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICByYWRpb0lucHV0cy5mb3JFYWNoKHJhZGlvID0+IHJhZGlvLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9JbnB1dHMuZm9yRWFjaChyYWRpbyA9PiByYWRpby5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWRhdGlvblxuXG4gICAgICAgIGZ1bmN0aW9uICBjaGVja1ZhbGlkKCl7XG4gICAgICAgICAgICBsZXQgaXNWYWxpZCA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCB3YXJuaW5ncyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi53YXJuaW5nXCIpO1xuICAgICAgICAgICAgd2FybmluZ3MuZm9yRWFjaCh3YXJuaW5nID0+IHdhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcIndhcm5pbmdcIikpOyAvLyDQntGH0LjRgdGC0LjRgtC4INC/0L7Qv9C10YDQtdC00L3RliDQv9C+0LzQuNC70LrQuFxuXG4gICAgICAgICAgICBjb25zdCBhZGRXYXJuaW5nID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZChcIndhcm5pbmdcIik7XG4gICAgICAgICAgICAgICAgbGV0IHdhcm5pbmdNZXNzYWdlID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIGlmICghd2FybmluZ01lc3NhZ2UgfHwgIXdhcm5pbmdNZXNzYWdlLmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX3dhcm5pbmdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01lc3NhZ2UuY2xhc3NMaXN0LmFkZChcImZvcm1fX3dhcm5pbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh3YXJuaW5nTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IHN1cm5hbWVWYWxpZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgZmlyc3ROYW1lVmFsaWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IHNlY29uZE5hbWVWYWxpZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgcGhvbmVWYWxpZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgYmlydGhEYXRlVmFsaWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGlzTWlsaXRhcnlWYWxpZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgY29uc2VudFZhbGlkID0gZmFsc2VcblxuXG4gICAgICAgICAgICBjb25zdCBzdXJuYW1lID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LXN1cm5hbWVcIik7XG4gICAgICAgICAgICBzdXJuYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PntcbiAgICAgICAgICAgICAgICBpZiAoIXN1cm5hbWUudmFsdWUudHJpbSgpKSBhZGRXYXJuaW5nKHN1cm5hbWUsIFwi0J/RgNGW0LfQstC40YnQtSDQvtCx0L7QsifRj9C30LrQvtCy0LVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKCFzdXJuYW1lLnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGFkZFdhcm5pbmcoc3VybmFtZSwgXCLQn9GA0ZbQt9Cy0LjRidC1INC+0LHQvtCyJ9GP0LfQutC+0LLQtVwiKTtcblxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc3VybmFtZVZhbGlkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtZmlyc3QtbmFtZVwiKTtcbiAgICAgICAgICAgIGlmICghZmlyc3ROYW1lLnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGFkZFdhcm5pbmcoZmlyc3ROYW1lLCBcItCG0Lwn0Y8g0L7QsdC+0LIn0Y/Qt9C60L7QstC1XCIpO1xuXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWVWYWxpZCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kTmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC1taWRkbGUtbmFtZVwiKTtcbiAgICAgICAgICAgIGlmICghc2Vjb25kTmFtZS52YWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICBhZGRXYXJuaW5nKHNlY29uZE5hbWUsIFwi0J/QviDQsdCw0YLRjNC60L7QstGWINC+0LHQvtCyJ9GP0LfQutC+0LLQtVwiKTtcblxuXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzZWNvbmROYW1lVmFsaWQgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBob25lID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LXBob25lXCIpO1xuICAgICAgICAgICAgaWYgKCFwaG9uZS52YWx1ZS50cmltKCkgfHwgIS9eXFwrMzhcXHM/XFxkezN9XFxzP1xcZHszfVxccz9cXGR7Mn1cXHM/XFxkezJ9JC8udGVzdChwaG9uZS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhZGRXYXJuaW5nKHBob25lLCBcItCd0L7QvNC10YAg0YLQtdC70LXRhNC+0L3RgyDQvtCx0L7QsifRj9C30LrQvtCy0LjQuVwiKTtcblxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcGhvbmVWYWxpZCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYmlydGhEYXRlID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LWRhdGVcIik7XG4gICAgICAgICAgICBpZiAoIWJpcnRoRGF0ZS52YWx1ZSB8fCBiaXJ0aERhdGUudmFsdWUgPT09IFwiMjAwMC0wMS0wMVwiKSB7XG4gICAgICAgICAgICAgICAgYWRkV2FybmluZyhiaXJ0aERhdGUsIFwi0JTQsNGC0LAg0L3QsNGA0L7QtNC20LXQvdC90Y8g0L7QsdC+0LIn0Y/Qt9C60L7QstCwXCIpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYmlydGhEYXRlVmFsaWQgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlzTWlsaXRhcnkgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtcmFkaW86Y2hlY2tlZFwiKTtcbiAgICAgICAgICAgIGlmICghaXNNaWxpdGFyeSl7XG4gICAgICAgICAgICAgICAgYWRkV2FybmluZyhmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fcmFkaW8tZ3JvdXBcIiksIFwi0J7QsdC10YDRltGC0Ywg0LLQsNGA0ZbQsNC90YJcIik7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNNaWxpdGFyeVZhbGlkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb25zZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LWNoZWNrYm94XCIpO1xuICAgICAgICAgICAgaWYgKCFjb25zZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBhZGRXYXJuaW5nKGNvbnNlbnQsIFwi0JLQuCDQv9C+0LLQuNC90L3RliDQv9C+0LPQvtC00LjRgtC40YHRjyDQtyDQvtCx0YDQvtCx0LrQvtGOINC00LDQvdC40YVcIik7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjb25zZW50VmFsaWQgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdXJuYW1lVmFsaWQgJiYgZmlyc3ROYW1lVmFsaWQgJiYgc2Vjb25kTmFtZVZhbGlkICYmIHBob25lVmFsaWQgJiYgYmlydGhEYXRlVmFsaWQgJiYgaXNNaWxpdGFyeVZhbGlkICYmIGNvbnNlbnRWYWxpZCl7XG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgZm9ybVdhcm5pbmcuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1XYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZFxuICAgICAgICB9XG5cblxuICAgICAgICBmb3Jtcy5mb3JFYWNoKGZvcm0gPT4ge1xuICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vINCX0LDQsdC70L7QutGD0LLQsNGC0Lgg0YHRgtCw0L3QtNCw0YDRgtC90YMg0LLRltC00L/RgNCw0LLQutGDXG5cbiAgICAgICAgICAgICAgICBsZXQgaXNWYWxpZCA9IGNoZWNrVmFsaWQoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpc1ZhbGlkKTtcblxuICAgICAgICAgICAgICAgIC8vINCf0LXRgNC10LLRltGA0LrQsCDQutCw0L/RgtGH0ZZcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGFSZXNwb25zZSA9IGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKTsgLy8g0J7RgtGA0LjQvNGD0ZTQvNC+INCy0ZbQtNC/0L7QstGW0LTRjCDQtyDQutCw0L/RgtGH0ZZcbiAgICAgICAgICAgICAgICBpZiAocmVjYXB0Y2hhUmVzcG9uc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi0JHRg9C00Ywg0LvQsNGB0LrQsCwg0L/RgNC+0LnQtNGW0YLRjCDQv9C10YDQtdCy0ZbRgNC60YMgcmVDQVBUQ0hBLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsgLy8g0KHRhdC+0LLQsNGC0Lgg0LrQvtC90YLQtdC90YJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlY2FwdGNoYScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyDQn9C+0LrQsNC30LDRgtC4INC60LDQv9GC0YfRg1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vINCv0LrRidC+INC60LDQv9GC0YfQsCDQvdC1INC/0YDQvtC50LTQtdC90LAsINC90LUg0LLRltC00L/RgNCw0LLQu9GP0ZTQvNC+INGE0L7RgNC80YNcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzTWVzc2FnZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtV2FybmluZy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NNZXNzYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtV2FybmluZy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmZXRjaChmb3JtLmFjdGlvbiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy8g0JLQuNCy0LXRgdGC0Lgg0LLRltC00L/QvtCy0ZbQtNGMINCy0ZbQtCDRgdC10YDQstC10YDQsFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc01lc3NhZ2UgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fd2FybmluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaW5jbHVkZXMoXCLQlNGP0LrRg9GU0LzQviDQt9CwINCy0LDRiNGDINC30LDRj9Cy0LrRgyFcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0J/QvtC60LDQt9Cw0YLQuCDQv9C+0LLRltC00L7QvNC70LXQvdC90Y8g0L/RgNC+INGD0YHQv9GW0YVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpOyAvLyDQntGH0LjRgdGC0LjRgtC4INGE0L7RgNC80YNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0J/QvtC60LDQt9Cw0YLQuCDQv9C+0LLRltC00L7QvNC70LXQvdC90Y8g0L/RgNC+INC/0L7QvNC40LvQutGDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcItCf0L7QvNC40LvQutCwINC/0YDQuCDQstGW0LTQv9GA0LDQstGG0ZYg0YTQvtGA0LzQuDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwi0J/QvtC80LjQu9C60LAg0L/RgNC4INCy0ZbQtNC/0YDQsNCy0YbRliDRhNC+0YDQvNC4LiDQodC/0YDQvtCx0YPQudGC0LUg0YnQtSDRgNCw0LcuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9KTtcbn0pO1xuXG5cblxuIl19
